<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AIF GOLD | The $12B Sovereign Reserve</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- POWER FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Prata&family=Montserrat:wght@300;400;600;800&family=Noto+Serif+TC:wght@400;700;900&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gold: {
                            100: '#FBF5D4',
                            200: '#F3E5AB',
                            300: '#E6C875',
                            400: '#D4AF37', // Base Gold
                            500: '#C5A028',
                            600: '#AA8820',
                            700: '#8A6E20',
                            800: '#5C4810',
                            900: '#3D2E05',
                        },
                        obsidian: '#050505',
                        charcoal: '#0F0F0F',
                        richblack: '#020202',
                    },
                    fontFamily: {
                        display: ['"Cinzel"', 'serif'],
                        serif: ['"Prata"', '"Noto Serif TC"', 'serif'],
                        sans: ['"Montserrat"', 'sans-serif'],
                    },
                    letterSpacing: {
                        'widest-2xl': '0.35em',
                    },
                    backgroundImage: {
                        'gold-gradient': 'linear-gradient(135deg, #F3E5AB 0%, #D4AF37 50%, #8A6E20 100%)',
                    },
                    screens: { 'xs': '375px' }
                }
            }
        }
    </script>

    <style>
        /* GLOBAL RESET & BASICS */
        body { 
            background-color: #020202; 
            color: #E0E0E0; 
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        /* TEXTURE OVERLAY */
        .noise-overlay {
            position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: 0.04;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #D4AF37; }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: #0F0F0F; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #333; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #D4AF37; }

        /* ANIMATIONS */
        .animate-reveal { animation: reveal 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(40px); }
        @keyframes reveal { to { opacity: 1; transform: translateY(0); } }

        /* CARD HOVER */
        .asset-card { transition: all 0.5s ease; }
        .asset-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.8); border-color: rgba(212,175,55,0.4); }
        .asset-card:hover .asset-img { transform: scale(1.05); }
        .asset-img { transition: transform 1.5s cubic-bezier(0.19, 1, 0.22, 1); }

        /* TEXT GRADIENT */
        .text-gradient-gold {
            background: linear-gradient(to right, #FBF5D4, #D4AF37, #AA8820);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* MAP STYLES - HIGH DENSITY */
        .map-dot {
            position: absolute; width: 4px; height: 4px; background: #D4AF37; border-radius: 50%;
            box-shadow: 0 0 10px #D4AF37; z-index: 10;
        }
        .map-label {
            position: absolute; font-family: 'Montserrat', sans-serif; font-size: 7px; color: #666;
            transform: translate(-50%, -15px); pointer-events: none; opacity: 0; z-index: 10; letter-spacing: 1px; transition: opacity 0.3s;
        }
        .map-dot:hover + .map-label { opacity: 1; color: #fff; text-shadow: 0 0 5px #D4AF37; }
        
        .map-svg-layer {
            position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5;
        }
        .flow-line {
            fill: none; stroke: url(#grad1); stroke-width: 0.5; opacity: 0.3;
        }
        .flow-particle {
            fill: #fff; filter: drop-shadow(0 0 3px #D4AF37);
        }

        /* CONFIDENTIAL PATTERN (For broken images) */
        .confidential-bg {
            background-color: #050505;
            background-image: repeating-linear-gradient(45deg, #0a0a0a 25%, transparent 25%, transparent 75%, #0a0a0a 75%, #0a0a0a), repeating-linear-gradient(45deg, #0a0a0a 25%, #050505 25%, #050505 75%, #0a0a0a 75%, #0a0a0a);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
        }

        /* TABS */
        .tab-btn { position: relative; opacity: 0.5; transition: all 0.3s; }
        .tab-btn.active { opacity: 1; color: #D4AF37; }
        .tab-btn.active::after {
            content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 2px; background: #D4AF37;
            box-shadow: 0 0 10px #D4AF37;
        }
        
        /* PROCESS FLOW */
        .step-line { transition: width 0.5s ease; }
        .step-circle { transition: all 0.5s ease; }
        .step-circle.active { border-color: #D4AF37; background: #D4AF37; color: black; box-shadow: 0 0 15px rgba(212, 175, 55, 0.4); }
        .step-circle.completed { border-color: #4ade80; background: #4ade80; color: black; }

        /* TYPOGRAPHY OVERRIDE */
        h1, h2, h3, h4, .font-display { font-family: 'Cinzel', serif; }
        p, .font-serif { font-family: 'Prata', 'Noto Serif TC', serif; }
        .font-sans { font-family: 'Montserrat', sans-serif; }
    </style>
</head>
<body class="font-sans selection:bg-gold-400 selection:text-black">

    <div class="noise-overlay"></div>

    <!-- 1. NAVIGATION -->
    <nav class="fixed top-0 w-full z-50 bg-richblack/95 backdrop-blur-xl border-b border-white/5 transition-all duration-500" id="navbar">
        <div class="container mx-auto px-4 md:px-8 h-20 md:h-24 flex justify-between items-center">
            
            <div class="flex items-center gap-4 cursor-pointer group" onclick="window.scrollTo(0,0)">
                <div class="w-10 h-10 border border-gold-400 flex items-center justify-center relative overflow-hidden bg-black">
                    <i class="fas fa-university text-gold-400 text-lg relative z-10"></i>
                </div>
                <div>
                    <div class="font-display font-black text-xl tracking-widest text-white leading-none">AIF GOLD</div>
                    <div class="text-[0.6rem] text-gold-400 tracking-[0.4em] uppercase mt-1">Sovereign Reserve</div>
                </div>
            </div>

            <div class="hidden lg:flex items-center gap-12 text-xs font-display font-bold tracking-widest text-gray-500">
                <a href="#stats" class="hover:text-gold-200 transition-colors i18n" data-key="nav_reserve">GLOBAL RESERVE</a>
                <a href="#collection" class="hover:text-gold-200 transition-colors i18n" data-key="nav_assets">ASSET MATRIX</a>
                <a href="#custody" class="hover:text-gold-200 transition-colors i18n" data-key="nav_custody">CUSTODY</a>
            </div>

            <div class="flex items-center gap-4 md:gap-8">
                <div class="hidden md:flex flex-col text-right">
                    <span class="text-[0.5rem] text-gray-500 tracking-widest uppercase">Live Gold Price</span>
                    <span class="text-xs font-mono text-gold-400">$2,482.50 / oz</span>
                </div>
                <button onclick="toggleLang()" class="w-8 h-8 rounded-full border border-white/10 flex items-center justify-center text-xs font-serif text-gold-400 hover:bg-white/5 transition-colors">
                    <span id="lang-btn">繁</span>
                </button>
                <button class="bg-gold-400 text-black px-6 py-3 font-display font-bold text-xs tracking-widest hover:bg-white transition-colors shadow-[0_0_20px_rgba(212,175,55,0.2)]">
                    <span class="i18n" data-key="btn_connect">CONNECT VAULT</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- 2. HERO (UPDATED BACKGROUND: MOUNTAINS OF GOLD) -->
    <header class="relative min-h-screen flex items-center justify-center overflow-hidden pt-20">
        <div class="absolute inset-0 z-0">
            <div class="absolute inset-0 bg-gradient-to-t from-richblack via-richblack/60 to-transparent z-10"></div>
            <div class="absolute inset-0 bg-black/20 z-10"></div>
            <!-- Updated Image: Dramatic pile of gold coins/bullion -->
            <img src="https://images.unsplash.com/photo-1620317808269-e7786480b067?q=80&w=2500" class="w-full h-full object-cover scale-105 animate-[pulse_30s_ease-in-out_infinite] opacity-90" alt="Mountains of Gold Coins">
        </div>

        <div class="relative z-20 container mx-auto px-6 grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
            <div class="lg:col-span-8 text-center lg:text-left">
                <div class="mb-6 animate-reveal">
                    <span class="inline-flex items-center gap-2 px-3 py-1 border border-gold-400/30 bg-black/70 backdrop-blur">
                        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                        <span class="text-[0.6rem] text-gold-200 tracking-[0.3em] uppercase i18n" data-key="hero_badge">Audited 2026.Q1 • $12.8B AUM</span>
                    </span>
                </div>
                <h1 class="font-display font-black text-5xl md:text-8xl lg:text-9xl text-white mb-8 leading-[0.9] animate-reveal delay-100 uppercase drop-shadow-2xl">
                    <span class="block text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-400">Power</span>
                    <span class="block text-gradient-gold">Backed</span>
                    <span class="block text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-400">Wealth</span>
                </h1>
                <p class="font-serif text-gray-200 text-lg md:text-xl leading-relaxed max-w-2xl mx-auto lg:mx-0 mb-12 animate-reveal delay-200 i18n shadow-black drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]" data-key="hero_desc">
                    The ultimate convergence of AI computational yield and sovereign physical assets. A $12.8 Billion reserve of gold, real estate, and fine art, instantly redeemable on-chain.
                </p>
                <div class="flex flex-col md:flex-row gap-6 justify-center lg:justify-start animate-reveal delay-300">
                    <button onclick="scrollToId('collection')" class="bg-gold-400 text-black px-10 py-5 font-display font-bold tracking-widest text-sm hover:scale-105 transition-transform shadow-[0_0_30px_rgba(212,175,55,0.4)]">
                        <span class="i18n" data-key="btn_explore">EXPLORE ASSETS</span>
                    </button>
                    <button class="border border-white/20 text-white px-10 py-5 font-display font-bold tracking-widest text-sm hover:bg-white hover:text-black transition-colors backdrop-blur-sm bg-black/30">
                        <span class="i18n" data-key="btn_whitepaper">VIEW AUDIT</span>
                    </button>
                </div>
            </div>

            <div class="lg:col-span-4 hidden lg:block animate-reveal delay-300">
                <div class="bg-black/40 backdrop-blur-xl border border-white/10 p-8 relative overflow-hidden rounded-sm shadow-2xl">
                    <div class="absolute top-0 right-0 p-4 opacity-10 text-9xl text-gold-400 font-display font-black">Au</div>
                    <h3 class="text-gold-400 font-display text-sm tracking-widest mb-6 border-b border-white/10 pb-2">MARKET PULSE</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <div class="flex justify-between text-xs text-gray-400 mb-1 tracking-wider">GOLD / USD</div>
                            <div class="flex justify-between items-end">
                                <div class="text-3xl text-white font-mono">$2,482.50</div>
                                <div class="text-green-400 text-xs font-bold bg-green-400/10 px-2 py-1">+1.24%</div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs text-gray-400 mb-1 tracking-wider">AIF TOKEN</div>
                            <div class="flex justify-between items-end">
                                <div class="text-3xl text-white font-mono">$14.82</div>
                                <div class="text-green-400 text-xs font-bold bg-green-400/10 px-2 py-1">+5.8%</div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs text-gray-400 mb-1 tracking-wider">TOTAL MINTED</div>
                            <div class="text-3xl text-gold-200 font-mono">4,208,192 oz</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- 3. DASHBOARD & LIVE MAP (UPDATED GEOGRAPHY & SPEED) -->
    <section id="stats" class="py-24 bg-charcoal relative border-y border-white/5">
        <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"></div>
        
        <div class="container mx-auto px-6 relative z-10">
            <div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-8">
                <div>
                    <h2 class="font-display font-bold text-4xl md:text-5xl text-white mb-2 uppercase"><span class="text-gold-400">Global</span> Reserve</h2>
                    <p class="font-serif text-gray-500 italic i18n" data-key="stats_sub">Real-time asset verification across 32 jurisdictions.</p>
                </div>
                <div class="text-left md:text-right">
                    <div class="text-[0.6rem] text-gray-500 tracking-widest uppercase mb-1">Total Assets Under Management</div>
                    <div class="font-mono text-4xl md:text-6xl text-white font-bold tracking-tighter">$12,845,290,400</div>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-px bg-white/10 border border-white/10 mb-16">
                <div class="bg-charcoal p-8 hover:bg-white/5 transition-colors group">
                    <div class="text-gold-400 text-2xl mb-4 group-hover:scale-110 transition-transform duration-500"><i class="fas fa-layer-group"></i></div>
                    <div class="text-4xl text-white font-display font-bold mb-2">142,850</div>
                    <div class="text-[0.6rem] text-gray-500 tracking-[0.2em] uppercase">Total Assets</div>
                </div>
                <div class="bg-charcoal p-8 hover:bg-white/5 transition-colors group">
                    <div class="text-gold-400 text-2xl mb-4 group-hover:scale-110 transition-transform duration-500"><i class="fas fa-globe-americas"></i></div>
                    <div class="text-4xl text-white font-display font-bold mb-2">32</div>
                    <div class="text-[0.6rem] text-gray-500 tracking-[0.2em] uppercase">Cities</div>
                </div>
                <div class="bg-charcoal p-8 hover:bg-white/5 transition-colors group">
                    <div class="text-gold-400 text-2xl mb-4 group-hover:scale-110 transition-transform duration-500"><i class="fas fa-exchange-alt"></i></div>
                    <div class="text-4xl text-white font-display font-bold mb-2">$4.2B</div>
                    <div class="text-[0.6rem] text-gray-500 tracking-[0.2em] uppercase">Redeemed Value</div>
                </div>
                <div class="bg-charcoal p-8 hover:bg-white/5 transition-colors group">
                    <div class="text-gold-400 text-2xl mb-4 group-hover:scale-110 transition-transform duration-500"><i class="fas fa-users"></i></div>
                    <div class="text-4xl text-white font-display font-bold mb-2">84k+</div>
                    <div class="text-[0.6rem] text-gray-500 tracking-[0.2em] uppercase">Holders</div>
                </div>
            </div>

            <!-- LIVE FLOW MAP -->
            <div class="relative h-[500px] w-full bg-[#050505] border border-white/10 overflow-hidden rounded-lg shadow-2xl" id="map-container">
                <!-- Base Map -->
                <div class="absolute inset-0 opacity-20 bg-[url('https://upload.wikimedia.org/wikipedia/commons/e/ec/World_map_blank_without_borders.svg')] bg-cover bg-center"></div>
                
                <!-- SVG Layer for Arcs -->
                <svg class="map-svg-layer" id="map-svg">
                    <defs>
                        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#D4AF37;stop-opacity:0" />
                            <stop offset="50%" style="stop-color:#D4AF37;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#D4AF37;stop-opacity:0" />
                        </linearGradient>
                    </defs>
                </svg>

                <!-- JS will inject dots and labels here -->
                
                <div class="absolute bottom-6 left-6 text-xs font-mono text-gold-400 bg-black/50 p-2 backdrop-blur-sm border border-white/5 z-20">
                    <div class="flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div> LIVE ASSET FLOW</div>
                    <div class="text-gray-500 mt-1">> ZURICH >> HK [100kg AU]</div>
                    <div class="text-gray-500">> NY >> TOKYO [NFT]</div>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. COLLECTION -->
    <section id="collection" class="py-32 bg-richblack relative">
        <div class="container mx-auto px-4 md:px-8">
            <div class="text-center max-w-3xl mx-auto mb-20">
                <h2 class="font-display font-black text-4xl md:text-6xl text-white mb-6 uppercase">The Sovereign <span class="text-gold-400">Collection</span></h2>
                <p class="font-serif text-gray-400 text-lg leading-relaxed i18n" data-key="collection_desc">
                    A curated portfolio of high-value physical assets. Each item is individually insured, audited, and tokenized on the AIF Network.
                </p>
            </div>

            <div class="flex flex-wrap justify-center gap-4 mb-16">
                <button class="filter-btn active px-6 py-2 border border-gold-400 bg-gold-400 text-black font-bold tracking-widest text-xs uppercase" data-filter="all">All Assets</button>
                <button class="filter-btn px-6 py-2 border border-white/20 text-gray-400 hover:text-white font-bold tracking-widest text-xs uppercase transition-colors" data-filter="gold">Bullion</button>
                <button class="filter-btn px-6 py-2 border border-white/20 text-gray-400 hover:text-white font-bold tracking-widest text-xs uppercase transition-colors" data-filter="estate">Real Estate</button>
                <button class="filter-btn px-6 py-2 border border-white/20 text-gray-400 hover:text-white font-bold tracking-widest text-xs uppercase transition-colors" data-filter="luxury">Luxury</button>
                <button class="filter-btn px-6 py-2 border border-white/20 text-gray-400 hover:text-white font-bold tracking-widest text-xs uppercase transition-colors" data-filter="art">Fine Art</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="asset-grid">
                <!-- JS Populated -->
            </div>
            
            <div class="text-center mt-20">
                <button class="text-gold-400 text-xs tracking-[0.3em] uppercase border-b border-gold-400 pb-2 hover:text-white hover:border-white transition-colors">Load Archive (142,850 Items)</button>
            </div>
        </div>
    </section>

    <!-- 5. ASSET DETAIL MODAL (FULL PROCESS) -->
    <div id="modal-overlay" class="fixed inset-0 z-[100] bg-black/95 backdrop-blur-md hidden transition-opacity duration-500 opacity-0 overflow-y-auto">
        <div class="min-h-screen px-0 md:px-4 py-0 md:py-12 flex justify-center items-start">
            
            <div class="bg-charcoal w-full max-w-7xl border border-white/10 relative shadow-2xl flex flex-col lg:flex-row overflow-hidden min-h-[90vh] md:min-h-0" id="modal-content">
                
                <button onclick="closeModal()" class="absolute top-6 right-6 z-50 w-10 h-10 bg-black/50 hover:bg-gold-400 hover:text-black rounded-full flex items-center justify-center text-white transition-colors border border-white/10">
                    <i class="fas fa-times"></i>
                </button>

                <!-- Left: Visuals -->
                <div class="lg:w-5/12 bg-black relative h-[40vh] lg:h-auto">
                    <div id="img-container" class="w-full h-full relative">
                        <img id="modal-img" src="" class="w-full h-full object-cover opacity-90 transition-opacity duration-500" onerror="handleImgError(this)">
                        <div class="absolute inset-0 bg-gradient-to-t from-charcoal via-transparent to-transparent"></div>
                    </div>
                    
                    <div class="absolute bottom-0 left-0 w-full p-8 md:p-12">
                        <div class="flex items-center gap-4 mb-4">
                            <span class="px-3 py-1 bg-gold-400 text-black text-[0.6rem] font-bold tracking-widest uppercase" id="modal-type">GOLD</span>
                            <span class="px-3 py-1 border border-white/30 text-white text-[0.6rem] font-bold tracking-widest uppercase">Verified</span>
                        </div>
                        <h2 class="font-display font-black text-3xl md:text-5xl text-white mb-2 leading-tight" id="modal-title">TITLE</h2>
                        <div class="font-serif italic text-gold-400 text-xl md:text-2xl" id="modal-price">PRICE</div>
                    </div>
                </div>

                <!-- Right: Content & Process -->
                <div class="lg:w-7/12 flex flex-col h-[60vh] lg:h-[900px]">
                    
                    <!-- Progress Header -->
                    <div class="h-16 border-b border-white/10 bg-black/50 flex items-center px-8 justify-between shrink-0">
                        <div class="flex gap-4">
                            <div class="step-circle w-3 h-3 rounded-full border border-gray-600 active" id="dot-1"></div>
                            <div class="step-circle w-3 h-3 rounded-full border border-gray-600" id="dot-2"></div>
                            <div class="step-circle w-3 h-3 rounded-full border border-gray-600" id="dot-3"></div>
                            <div class="step-circle w-3 h-3 rounded-full border border-gray-600" id="dot-4"></div>
                        </div>
                        <div class="text-[0.6rem] font-display text-gold-400 tracking-widest uppercase" id="process-label">01. Inspection</div>
                    </div>

                    <!-- Scrollable Content Area -->
                    <div class="flex-grow overflow-y-auto custom-scroll p-8 md:p-12 bg-charcoal">
                        
                        <!-- VIEW 1: INSPECTION (Details) -->
                        <div id="view-inspection" class="process-view">
                            <!-- Tabs -->
                            <div class="flex border-b border-white/10 mb-8 overflow-x-auto no-scrollbar gap-8">
                                <button onclick="switchTab('overview')" class="tab-btn active pb-4 text-xs font-bold tracking-widest uppercase whitespace-nowrap" id="tab-overview">Overview</button>
                                <button onclick="switchTab('story')" class="tab-btn pb-4 text-xs font-bold tracking-widest uppercase whitespace-nowrap" id="tab-story">Legacy</button>
                                <button onclick="switchTab('diligence')" class="tab-btn pb-4 text-xs font-bold tracking-widest uppercase whitespace-nowrap" id="tab-diligence">Due Diligence</button>
                                <button onclick="switchTab('insurance')" class="tab-btn pb-4 text-xs font-bold tracking-widest uppercase whitespace-nowrap" id="tab-insurance">Insurance</button>
                            </div>

                            <div id="content-overview" class="tab-content block">
                                <p id="modal-desc" class="font-serif text-gray-400 leading-loose text-sm mb-8"></p>
                                <div class="grid grid-cols-2 gap-4 border border-white/5 bg-white/5 p-6 mb-8">
                                    <div><div class="text-[0.6rem] text-gray-500 uppercase tracking-widest mb-1">Origin</div><div class="text-white font-display" id="data-origin">-</div></div>
                                    <div><div class="text-[0.6rem] text-gray-500 uppercase tracking-widest mb-1">Year</div><div class="text-white font-display" id="data-year">-</div></div>
                                    <div><div class="text-[0.6rem] text-gray-500 uppercase tracking-widest mb-1">Weight/Size</div><div class="text-white font-display" id="data-weight">-</div></div>
                                    <div><div class="text-[0.6rem] text-gray-500 uppercase tracking-widest mb-1">Custody</div><div class="text-white font-display" id="data-custody">-</div></div>
                                </div>
                            </div>
                            
                            <div id="content-story" class="tab-content hidden">
                                <h4 class="text-white font-display text-lg mb-4">Asset Legacy & History</h4>
                                <div id="text-story" class="font-serif text-gray-400 leading-relaxed text-sm space-y-4 text-justify"></div>
                            </div>

                            <div id="content-diligence" class="tab-content hidden">
                                <h4 class="text-white font-display text-lg mb-4">Provenance & Audit</h4>
                                <div id="text-diligence" class="font-mono text-gray-400 text-xs leading-relaxed space-y-4 border-l-2 border-gold-400 pl-4"></div>
                            </div>

                            <div id="content-insurance" class="tab-content hidden">
                                <h4 class="text-white font-display text-lg mb-4">Insurance Policy</h4>
                                <div id="text-insurance" class="font-sans text-gray-400 text-sm leading-relaxed space-y-4"></div>
                            </div>

                            <div class="mt-8 pt-8 border-t border-white/10">
                                <button onclick="nextStep(2)" class="w-full bg-gold-400 text-black py-5 font-display font-black tracking-widest text-sm hover:bg-white transition-colors uppercase">
                                    Initiate Acquisition Protocol
                                </button>
                            </div>
                        </div>

                        <!-- VIEW 2: VERIFICATION (Terminal) -->
                        <div id="view-verification" class="process-view hidden h-full flex flex-col justify-center items-center">
                            <i class="fas fa-satellite-dish text-4xl text-gold-400 mb-6 animate-pulse"></i>
                            <h3 class="font-display text-2xl text-white mb-2">Verifying Provenance</h3>
                            <p class="text-gray-500 text-sm mb-8 font-serif">Connecting to HKAIIFF Sovereign Nodes...</p>
                            
                            <div class="w-full max-w-md bg-black border border-white/10 p-6 font-mono text-xs text-green-500 h-48 overflow-hidden relative shadow-2xl">
                                <div id="terminal-logs" class="space-y-2"></div>
                                <div class="absolute bottom-0 left-0 w-full h-12 bg-gradient-to-t from-black to-transparent"></div>
                            </div>
                        </div>

                        <!-- VIEW 3: CONTRACT -->
                        <div id="view-contract" class="process-view hidden">
                            <h3 class="font-display text-2xl text-white mb-6">Execute Smart Contract</h3>
                            
                            <div class="bg-black/40 p-6 border border-white/10 mb-8 space-y-3 font-mono text-xs">
                                <div class="flex justify-between text-gray-400"><span>Asset Value</span><span class="text-white" id="contract-price"></span></div>
                                <div class="flex justify-between text-gray-400"><span>Vault Fee (Year 1)</span><span class="text-white">Included</span></div>
                                <div class="flex justify-between text-gray-400"><span>Network Gas</span><span class="text-white">0.0042 ETH</span></div>
                                <div class="h-px bg-white/10 my-2"></div>
                                <div class="flex justify-between text-gold-400 font-bold text-sm"><span>Total Allocation</span><span id="contract-total"></span></div>
                            </div>

                            <label class="flex items-start gap-4 p-4 border border-white/10 hover:border-gold-400/50 cursor-pointer transition-colors group mb-8">
                                <input type="checkbox" id="chk-contract" class="mt-1 accent-gold-400" onchange="toggleSignBtn()">
                                <div class="text-xs text-gray-500 leading-relaxed group-hover:text-gray-300">
                                    I hereby confirm the acquisition of the physical asset. I understand that the asset will remain in the designated insured custody until a physical redemption request is made via the Concierge desk.
                                </div>
                            </label>

                            <button id="btn-sign" disabled onclick="nextStep(4)" class="w-full border border-white/20 text-gray-600 py-5 font-display font-black tracking-widest text-sm uppercase transition-colors disabled:cursor-not-allowed">
                                Sign & Mint Certificate
                            </button>
                        </div>

                        <!-- VIEW 4: SUCCESS -->
                        <div id="view-success" class="process-view hidden h-full flex flex-col items-center justify-center text-center">
                            <div class="w-24 h-24 border-2 border-gold-400 rounded-full flex items-center justify-center mb-8 shadow-[0_0_50px_rgba(212,175,55,0.3)]">
                                <i class="fas fa-check text-4xl text-gold-400"></i>
                            </div>
                            <h3 class="font-display text-3xl text-white mb-2">Acquisition Complete</h3>
                            <p class="text-gray-500 text-sm mb-12 font-serif">The Sovereign Asset has been secured in your vault.</p>
                            
                            <div class="bg-white text-black p-8 w-full max-w-sm relative shadow-2xl transform rotate-1">
                                <div class="absolute top-0 left-0 w-full h-2 bg-gold-400"></div>
                                <div class="font-display font-bold text-2xl text-center mb-1">CERTIFICATE</div>
                                <div class="text-[0.6rem] tracking-[0.4em] text-center text-gray-500 uppercase mb-6">Of Sovereign Ownership</div>
                                
                                <div class="text-left font-mono text-xs space-y-3 border-t border-gray-200 pt-6">
                                    <div class="flex justify-between"><span>ASSET</span><span class="font-bold" id="cert-title">Gold Bar</span></div>
                                    <div class="flex justify-between"><span>OWNER</span><span class="font-bold">0x82...91a</span></div>
                                    <div class="flex justify-between"><span>DATE</span><span class="font-bold">2026-01-02</span></div>
                                    <div class="flex justify-between"><span>BLOCK</span><span class="font-bold text-blue-600">#19,283,442</span></div>
                                </div>
                                <div class="mt-8 text-center text-[0.5rem] text-gray-400 tracking-widest">VERIFIED BY HKAIIFF PROTOCOL</div>
                            </div>

                            <button onclick="closeModal()" class="mt-12 text-gold-400 text-xs tracking-[0.2em] hover:text-white uppercase transition-colors">Return to Matrix</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 6. FOOTER -->
    <footer class="bg-black py-24 border-t border-white/10">
        <div class="container mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12">
            <div>
                <div class="flex items-center gap-3 mb-6">
                    <i class="fas fa-university text-gold-400 text-2xl"></i>
                    <span class="font-display font-bold text-2xl text-white">AIF GOLD</span>
                </div>
                <p class="text-gray-500 text-sm leading-relaxed mb-6">
                    The world's leading sovereign asset protocol.
                </p>
            </div>
            <!-- Standard Footer Links -->
            <div class="col-span-3 grid grid-cols-2 md:grid-cols-3 gap-8 text-sm">
                <div>
                    <h4 class="text-white font-display font-bold mb-6 uppercase tracking-widest">Reserve</h4>
                    <ul class="space-y-3 text-gray-500"><li>Bullion</li><li>Real Estate</li><li>Fine Art</li></ul>
                </div>
                <div>
                    <h4 class="text-white font-display font-bold mb-6 uppercase tracking-widest">Legal</h4>
                    <ul class="space-y-3 text-gray-500"><li>Audit Reports</li><li>Proof of Reserves</li><li>Insurance</li></ul>
                </div>
                <div>
                    <h4 class="text-white font-display font-bold mb-6 uppercase tracking-widest">Concierge</h4>
                    <div class="text-gold-400 font-bold">VIP@AIF.GOLD</div>
                </div>
            </div>
        </div>
        <div class="container mx-auto px-6 mt-20 pt-8 border-t border-white/5 text-center text-xs text-gray-600 font-mono">
            &copy; 2026 HKAIIFF Foundation. All Rights Reserved.
        </div>
    </footer>

    <!-- JS LOGIC -->
    <script>
        // --- DATASET ---
        const fillerStory = "This asset represents a pinnacle of human achievement and natural rarity. Sourced from the most exclusive provenance, it has been held in private collections for decades before being brought onto the AIF sovereign chain. Its history spans continents and eras, serving as a silent witness to the changing tides of global fortune. Acquiring this asset is not merely a transaction; it is an entry into a legacy that transcends generations.";
        const fillerDiligence = "Audit Firm: Deloitte Switzerland\nVerification Date: 2025-12-15\nPhysical Inspection: PASSED\nSpectroscopic Analysis: 99.99% PURITY CONFIRMED\nChain of Custody: UNBROKEN\n\nNotes: Asset verified in-situ at Zurich Freeport Level 5 Vault. Seals intact. All documentation matches physical characteristics.";
        const fillerInsurance = "Insurer: Lloyd's of London Syndicate 2003\nPolicy Number: HK-992-AX-2026\nCoverage: 110% of Market Value\nRisks Covered: Theft, Damage, Loss, Political Risk, Cyber Event.\n\nThis policy is automatically transferable to the token holder upon smart contract execution.";

        const assets = [
            { id: 1, type: 'gold', title: {en:"500kg Swiss Gold Vault Share", zh:"500公斤瑞士金庫份額"}, price: "41,250,000 AIF", origin: "Zurich", year: "2024", weight: "500kg", custody: "Zurich Freeport", img: "https://images.unsplash.com/photo-1610375461490-67981315250d?q=80&w=1200", desc: {en: "Ownership of a dedicated pallet of 400oz London Good Delivery gold bars.", zh:"擁有專屬托盤的 400 盎司倫敦標準交割金條。"}, story: {en: "The Zurich Vault Collection represents the bedrock of the AIF Sovereign Reserve. Each bar carries a unique serial number that traces back to ethical mines in Western Australia. The pallet is stored in a segregated, allocated zone within the Zurich Freeport, accessible only by biometric authentication of three independent custodians.", zh:"蘇黎世金庫系列代表了 AIF 主權儲備的基石。每根金條都有一個獨特的序列號，可追溯到西澳大利亞的道德礦山。該托盤存儲在蘇黎世自由港的隔離分配區域。"}, diligence: {en: "Auditor: KPMG Global\nDate: 2026-01-01\nMethod: Ultrasound & XRF\nResult: 100% Match\n\nThe audit confirmed the physical presence and purity of all 40 bars on Pallet #992. No discrepancies found.", zh:"審計師：KPMG Global\n日期：2026-01-01\n方法：超聲波與XRF\n結果：100% 匹配\n\n審計確認了#992 托盤上所有 40 根金條的物理存在和純度。未發現差異。"}, insurance: {en: "Policy: AXA XL Specie\nLimit: $100M USD\nJurisdiction: Swiss Law\n\nFull replacement value coverage against all risks including war and terrorism within the Swiss borders.", zh:"保單：AXA XL Specie\n限額：1億美元\n管轄權：瑞士法律\n\n針對瑞士境內所有風險（包括戰爭和恐怖主義）的全額重置價值保險。"} },
            { id: 2, type: 'estate', title: {en:"The Sovereign Penthouse", zh:"紐約曼哈頓中央公園頂層"}, price: "85,000,000 AIF", origin: "New York", year: "2023", weight: "8,500 sqft", custody: "NY Trust", img: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=1200", desc: {en: "A trophy asset overlooking Central Park. Represents the pinnacle of Manhattan real estate.", zh:"俯瞰中央公園的獎杯資產。這座 8,500 平方英尺的頂層公寓代表了曼哈頓房地產的巔峰。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 3, type: 'luxury', title: {en: "1962 Ferrari 250 GTO", zh: "1962 法拉利 250 GTO"}, price: "52,000,000 AIF", origin: "Italy", year: "1962", weight: "Chassis #3943", custody: "Monaco", img: "https://images.unsplash.com/photo-1552519507-da3b142c6e3d?q=80&w=1200", desc: {en: "The Holy Grail of automobiles.", zh: "汽車界的聖杯。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 4, type: 'art', title: {en: "Picasso 'Le Rêve'", zh: "畢加索 '夢'"}, price: "155,000,000 AIF", origin: "France", year: "1932", weight: "Canvas", custody: "Geneva", img: "https://images.unsplash.com/photo-1578321272176-b7bbc0679853?q=80&w=1200", desc: {en: "A blue-chip masterpiece.", zh: "藍籌傑作。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 5, type: 'gold', title: {en: "Pink Star Diamond", zh: "粉紅之星 鑽石"}, price: "71,200,000 AIF", origin: "SA", year: "2020", weight: "59.6ct", custody: "London", img: "https://images.unsplash.com/photo-1615655406736-b37c4fabf923?q=80&w=1200", desc: {en: "Largest Fancy Vivid Pink.", zh: "最大的艷彩粉紅鑽。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 6, type: 'estate', title: {en: "Isla Sol Private Island", zh: "太陽島 私人島嶼"}, price: "45,000,000 AIF", origin: "Bahamas", year: "N/A", weight: "45 Acres", custody: "Bahamas", img: "https://images.unsplash.com/photo-1596323674426-5339f8016c61?q=80&w=1200", desc: {en: "Undeveloped paradise.", zh: "未開發的天堂。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 7, type: 'luxury', title: {en: "Superyacht Aeon", zh: "超級遊艇 Aeon"}, price: "120,000,000 AIF", origin: "Netherlands", year: "2025", weight: "1800 GT", custody: "Monaco", img: "https://images.unsplash.com/photo-1605281317010-fe5ffe79ba02?q=80&w=1200", desc: {en: "80m hybrid propulsion.", zh: "80米混合動力。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 8, type: 'luxury', title: {en: "Patek Philippe Grandmaster", zh: "百達翡麗 大師弦音"}, price: "31,000,000 AIF", origin: "Geneva", year: "2019", weight: "Steel", custody: "Geneva", img: "https://images.unsplash.com/photo-1523170335258-f5ed11844a49?q=80&w=1200", desc: {en: "Most complex wristwatch.", zh: "最複雜的腕錶。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 9, type: 'estate', title: {en: "Bordeaux Vineyard", zh: "波爾多酒莊"}, price: "28,000,000 AIF", origin: "France", year: "1855", weight: "20 Hectare", custody: "France", img: "https://images.unsplash.com/photo-1524683707736-24e543666f7f?q=80&w=1200", desc: {en: "Grand Cru estate.", zh: "特級酒莊。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 10, type: 'gold', title: {en: "Roman Gold Hoard", zh: "羅馬金幣窖藏"}, price: "12,500,000 AIF", origin: "Italy", year: "200 AD", weight: "500 Coins", custody: "Museum", img: "https://images.unsplash.com/photo-1620317808269-e7786480b067?q=80&w=1200", desc: {en: "Ancient Aureus coins.", zh: "古代奧雷金幣。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 11, type: 'estate', title: {en: "Ginza Retail Block", zh: "銀座商業大樓"}, price: "110,000,000 AIF", origin: "Tokyo", year: "2018", weight: "12 Floors", custody: "Tokyo", img: "https://images.unsplash.com/photo-1503899036084-c55cdd92da26?q=80&w=1200", desc: {en: "Prime retail asset.", zh: "黃金零售資產。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 12, type: 'luxury', title: {en: "Dalmore 62", zh: "大摩 62年"}, price: "250,000 AIF", origin: "Scotland", year: "1942", weight: "700ml", custody: "Edinburgh", img: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?q=80&w=1200", desc: {en: "Liquid gold.", zh: "液體黃金。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 13, type: 'gold', title: {en: "Rare Earth Basket", zh: "稀土金屬籃子"}, price: "5,000,000 AIF", origin: "Global", year: "2025", weight: "10 Tons", custody: "Singapore", img: "https://images.unsplash.com/photo-1518534729329-844c843812d4?q=80&w=1200", desc: {en: "Strategic industrial metals.", zh: "戰略工業金屬。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 14, type: 'estate', title: {en: "Kensington Mansion", zh: "肯辛頓豪宅"}, price: "65,000,000 AIF", origin: "London", year: "1890", weight: "12k sqft", custody: "UK", img: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=1200", desc: {en: "Victorian villa.", zh: "維多利亞式別墅。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} },
            { id: 15, type: 'art', title: {en: "CryptoPunk #3100", zh: "CryptoPunk #3100"}, price: "18,000,000 AIF", origin: "Ethereum", year: "2017", weight: "Digital", custody: "Multisig", img: "https://images.unsplash.com/photo-1642104704074-907c0698b98d?q=80&w=1200", desc: {en: "Alien punk.", zh: "外星人 Punk。"}, story: {en: fillerStory, zh: fillerStory}, diligence: {en: fillerDiligence, zh: fillerDiligence}, insurance: {en: fillerInsurance, zh: fillerInsurance} }
        ];

        // --- I18N ---
        const i18n = {
            en: {
                nav_reserve: "GLOBAL RESERVE", nav_assets: "ASSET MATRIX", nav_custody: "CUSTODY", btn_connect: "CONNECT VAULT",
                hero_badge: "Audited 2026.Q1 • $12.8B AUM",
                hero_desc: "The ultimate convergence of AI computational yield and sovereign physical assets. A $12.8 Billion reserve of gold, real estate, and fine art, instantly redeemable on-chain.",
                btn_explore: "EXPLORE ASSETS", btn_whitepaper: "VIEW AUDIT",
                stats_sub: "Real-time asset verification across 32 jurisdictions.",
                collection_desc: "A curated portfolio of high-value physical assets. Each item is individually insured, audited, and tokenized on the AIF Network."
            },
            zh: {
                nav_reserve: "全球儲備", nav_assets: "資產矩陣", nav_custody: "託管服務", btn_connect: "連接金庫",
                hero_badge: "2026.Q1 已審計 • 128億美元資產規模",
                hero_desc: "AI 算力收益與主權實體資產的終極融合。128 億美元的黃金、房地產和藝術品儲備，鏈上即時贖回。",
                btn_explore: "瀏覽資產", btn_whitepaper: "查看審計",
                stats_sub: "跨越 32 個司法管轄區的實時資產驗證。",
                collection_desc: "高價值實體資產的精選組合。每件物品均經過單獨保險、審計並在 AIF 網絡上代幣化。"
            }
        };

        let currentLang = 'en';
        let currentAsset = null;

        // --- INIT ---
        window.onload = () => {
            renderGrid('all');
            setupFilters();
            initMap();
        };

        // --- MAP LOGIC (High Density) ---
        function initMap() {
            const mapContainer = document.getElementById('map-container');
            const svgLayer = document.getElementById('map-svg');
            const cities = [
                {name:'New York', t:32, l:28}, {name:'London', t:24, l:48}, {name:'Zurich', t:27, l:50},
                {name:'Dubai', t:42, l:62}, {name:'Mumbai', t:45, l:68}, {name:'Singapore', t:58, l:78},
                {name:'Hong Kong', t:45, l:80}, {name:'Tokyo', t:35, l:88}, {name:'Sydney', t:80, l:92},
                {name:'Cape Town', t:82, l:53}, {name:'Sao Paulo', t:75, l:32}, {name:'Los Angeles', t:35, l:15},
                {name:'Vancouver', t:25, l:15}, {name:'Mexico City', t:45, l:20}, {name:'Lima', t:65, l:25},
                {name:'Reykjavik', t:15, l:42}, {name:'Oslo', t:18, l:50}, {name:'Moscow', t:20, l:60},
                {name:'Beijing', t:32, l:76}, {name:'Seoul', t:34, l:82}, {name:'Bangkok', t:50, l:72},
                {name:'Jakarta', t:65, l:76}, {name:'Nairobi', t:60, l:55}, {name:'Cairo', t:35, l:55},
                {name:'Istanbul', t:30, l:55}, {name:'Paris', t:26, l:49}, {name:'Berlin', t:23, l:51},
                {name:'Toronto', t:28, l:25}, {name:'Chicago', t:30, l:22}, {name:'Miami', t:38, l:25},
                {name:'Panama', t:52, l:22}, {name:'Santiago', t:80, l:28}
            ];

            // Render Dots
            cities.forEach(city => {
                const dot = document.createElement('div');
                dot.className = 'map-dot';
                dot.style.top = city.t + '%';
                dot.style.left = city.l + '%';
                dot.title = city.name;
                
                const label = document.createElement('div');
                label.className = 'map-label';
                label.innerText = city.name.toUpperCase();
                label.style.top = city.t + '%';
                label.style.left = city.l + '%';
                
                mapContainer.appendChild(dot);
                mapContainer.appendChild(label);
            });

            // Animate Arcs - Rapid Fire
            function animateArcs() {
                // Pick random pairs frequently
                const count = Math.floor(Math.random() * 3) + 2; // 2-4 lines at once
                for(let i=0; i<count; i++) {
                    const start = cities[Math.floor(Math.random() * cities.length)];
                    const end = cities[Math.floor(Math.random() * cities.length)];
                    if(start === end) continue;

                    createArc(start, end, svgLayer);
                }
                // Faster interval
                setTimeout(animateArcs, 400); 
            }
            animateArcs();
        }

        function createArc(start, end, svg) {
            const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
            
            // Calc coordinates based on container size (approx)
            const w = svg.clientWidth;
            const h = svg.clientHeight;
            const x1 = (start.l / 100) * w;
            const y1 = (start.t / 100) * h;
            const x2 = (end.l / 100) * w;
            const y2 = (end.t / 100) * h;

            // Bezier curve
            const mx = (x1 + x2) / 2;
            const my = Math.min(y1, y2) - (Math.random() * 50 + 20); // Variable Curve upwards
            const d = `M ${x1} ${y1} Q ${mx} ${my} ${x2} ${y2}`;

            path.setAttribute("d", d);
            path.setAttribute("class", "flow-line");
            svg.appendChild(path);

            // Particle
            const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            circle.setAttribute("r", "1.5");
            circle.setAttribute("class", "flow-particle");
            
            // Animate along path - Faster
            const animateMotion = document.createElementNS("http://www.w3.org/2000/svg", "animateMotion");
            animateMotion.setAttribute("dur", "1s"); // Fast flight
            animateMotion.setAttribute("repeatCount", "1");
            animateMotion.setAttribute("path", d);
            
            circle.appendChild(animateMotion);
            svg.appendChild(circle);

            // Cleanup
            setTimeout(() => {
                if(path.parentNode) svg.removeChild(path);
                if(circle.parentNode) svg.removeChild(circle);
            }, 1000);
        }

        // --- IMAGE FALLBACK (CONFIDENTIAL MODE) ---
        function handleImgError(img) {
            img.onerror = null;
            // Replace with Confidential Placeholder
            img.style.display = 'none';
            const parent = img.parentElement;
            
            // If fallback already exists, don't add again
            if(parent.querySelector('.confidential-fallback')) return;

            const fallback = document.createElement('div');
            fallback.className = 'confidential-fallback w-full h-full absolute inset-0 confidential-bg flex flex-col items-center justify-center border border-white/5 z-20';
            fallback.innerHTML = `
                <div class="w-16 h-16 border border-gold-400 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(212,175,55,0.3)]">
                    <i class="fas fa-lock text-gold-400 text-2xl"></i>
                </div>
                <div class="text-gold-400 text-xs font-display tracking-[0.3em] uppercase mb-1">Confidential Asset</div>
                <div class="text-gray-600 text-[0.5rem] tracking-widest uppercase">Clearance Required</div>
            `;
            parent.appendChild(fallback);
        }

        // --- RENDER GRID ---
        function renderGrid(filter) {
            const grid = document.getElementById('asset-grid');
            grid.innerHTML = '';
            const items = filter === 'all' ? assets : assets.filter(i => i.type === filter);
            
            items.forEach((item, idx) => {
                const title = item.title[currentLang];
                const delay = idx * 50;
                
                const card = document.createElement('div');
                card.className = "asset-card cursor-pointer group animate-reveal";
                card.style.animationDelay = `${delay}ms`;
                card.onclick = () => openModal(item.id);

                card.innerHTML = `
                    <div class="relative h-[500px] overflow-hidden bg-charcoal border border-white/5">
                        <img src="${item.img}" class="asset-img w-full h-full object-cover opacity-80 group-hover:opacity-100" onerror="handleImgError(this)">
                        <div class="absolute top-6 right-6 z-10">
                            <span class="bg-black/80 text-gold-400 text-[0.6rem] font-bold px-3 py-1 tracking-widest border border-gold-400/30">AVAILABLE</span>
                        </div>
                        <div class="absolute bottom-0 left-0 w-full p-8 bg-gradient-to-t from-black via-black/90 to-transparent z-10">
                            <div class="text-gold-400 text-[0.6rem] tracking-[0.3em] uppercase mb-3">${item.type}</div>
                            <h3 class="text-white font-display font-bold text-2xl mb-2 leading-tight">${title}</h3>
                            <div class="flex justify-between items-end border-t border-white/10 pt-4 mt-4">
                                <div><div class="text-[0.6rem] text-gray-500 uppercase">Valuation</div><div class="text-white font-serif italic">${item.price}</div></div>
                                <div class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center text-white group-hover:bg-gold-400 group-hover:text-black group-hover:border-gold-400 transition-colors"><i class="fas fa-arrow-right text-xs"></i></div>
                            </div>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- FILTER ---
        function setupFilters() {
            const btns = document.querySelectorAll('.filter-btn');
            btns.forEach(btn => {
                btn.onclick = () => {
                    btns.forEach(b => { b.classList.remove('bg-gold-400', 'text-black', 'border-gold-400'); b.classList.add('text-gray-400', 'border-white/20'); });
                    btn.classList.remove('text-gray-400', 'border-white/20');
                    btn.classList.add('bg-gold-400', 'text-black', 'border-gold-400');
                    renderGrid(btn.dataset.filter);
                }
            });
        }

        // --- MODAL & PROCESS FLOW ---
        function openModal(id) {
            currentAsset = assets.find(a => a.id === id);
            if(!currentAsset) return;

            // Reset Steps
            document.querySelectorAll('.process-view').forEach(el => el.classList.add('hidden'));
            document.getElementById('view-inspection').classList.remove('hidden');
            document.querySelectorAll('.step-circle').forEach(el => { el.classList.remove('active', 'completed'); el.classList.remove('bg-gold-400', 'border-gold-400'); });
            document.getElementById('dot-1').classList.add('active');
            document.getElementById('process-label').innerText = "01. Inspection";

            // Reset Tabs
            switchTab('overview');

            // Populate Main Data
            const title = currentAsset.title[currentLang];
            const desc = currentAsset.desc[currentLang];
            document.getElementById('modal-img').src = currentAsset.img;
            
            // Remove any existing fallback if reusing image container
            const existingFallback = document.querySelector('#img-container .confidential-fallback');
            if(existingFallback) existingFallback.remove();
            document.getElementById('modal-img').style.display = 'block';

            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-type').innerText = currentAsset.type;
            document.getElementById('modal-price').innerText = currentAsset.price;
            
            document.getElementById('modal-desc').innerText = desc;
            document.getElementById('data-origin').innerText = currentAsset.origin;
            document.getElementById('data-year').innerText = currentAsset.year;
            document.getElementById('data-weight').innerText = currentAsset.weight;
            document.getElementById('data-custody').innerText = currentAsset.custody;

            // Populate Deep Content
            document.getElementById('text-story').innerText = currentAsset.story[currentLang];
            document.getElementById('text-diligence').innerText = currentAsset.diligence[currentLang];
            document.getElementById('text-insurance').innerText = currentAsset.insurance[currentLang];

            // Show Modal
            const overlay = document.getElementById('modal-overlay');
            overlay.classList.remove('hidden');
            setTimeout(() => overlay.classList.remove('opacity-0'), 10);
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const overlay = document.getElementById('modal-overlay');
            overlay.classList.add('opacity-0');
            setTimeout(() => {
                overlay.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 500);
        }

        function switchTab(tabId) {
            // Buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active', 'text-gold-400', 'border-b-2', 'border-gold-400'));
            const activeBtn = document.getElementById(`tab-${tabId}`);
            activeBtn.classList.add('active', 'text-gold-400', 'border-b-2', 'border-gold-400');

            // Content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
            document.getElementById(`content-${tabId}`).classList.remove('hidden');
        }

        function nextStep(step) {
            // Hide all views
            document.querySelectorAll('.process-view').forEach(el => el.classList.add('hidden'));
            
            // Update Dots
            for(let i=1; i<step; i++) {
                const dot = document.getElementById(`dot-${i}`);
                dot.classList.remove('active');
                dot.classList.add('completed', 'bg-green-500', 'border-green-500');
            }
            const activeDot = document.getElementById(`dot-${step}`);
            activeDot.classList.add('active');

            // Show View & Logic
            if(step === 2) {
                document.getElementById('view-verification').classList.remove('hidden');
                document.getElementById('process-label').innerText = "02. Verification";
                runTerminal();
            } else if (step === 3) {
                document.getElementById('view-contract').classList.remove('hidden');
                document.getElementById('process-label').innerText = "03. Signature";
                document.getElementById('contract-price').innerText = currentAsset.price;
                document.getElementById('contract-total').innerText = currentAsset.price;
                document.getElementById('btn-sign').disabled = true;
                document.getElementById('btn-sign').classList.add('text-gray-600', 'border-white/20');
                document.getElementById('btn-sign').classList.remove('bg-white', 'text-black', 'hover:bg-gold-400');
                document.getElementById('chk-contract').checked = false;
            } else if (step === 4) {
                document.getElementById('view-success').classList.remove('hidden');
                document.getElementById('process-label').innerText = "04. Completed";
                document.getElementById('cert-title').innerText = currentAsset.title.en;
            }
        }

        function runTerminal() {
            const logs = document.getElementById('terminal-logs');
            logs.innerHTML = '';
            const steps = [
                "> Initializing handshake with HKAIIFF Node...",
                "> Verifying Asset ID Hash...",
                "> Checking Custody Status: SECURE",
                "> Auditing Insurance Policy...",
                "> PROVENANCE VERIFIED."
            ];
            let i = 0;
            const interval = setInterval(() => {
                if(i < steps.length) {
                    const line = document.createElement('div');
                    line.innerText = steps[i];
                    logs.appendChild(line);
                    i++;
                } else {
                    clearInterval(interval);
                    setTimeout(() => nextStep(3), 1000);
                }
            }, 800);
        }

        function toggleSignBtn() {
            const chk = document.getElementById('chk-contract');
            const btn = document.getElementById('btn-sign');
            if(chk.checked) {
                btn.disabled = false;
                btn.classList.remove('text-gray-600', 'border-white/20');
                btn.classList.add('bg-white', 'text-black', 'hover:bg-gold-400');
            } else {
                btn.disabled = true;
                btn.classList.add('text-gray-600', 'border-white/20');
                btn.classList.remove('bg-white', 'text-black', 'hover:bg-gold-400');
            }
        }

        // --- SCROLL TO ---
        function scrollToId(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // --- LANG ---
        function toggleLang() {
            currentLang = currentLang === 'en' ? 'zh' : 'en';
            document.getElementById('lang-btn').innerText = currentLang === 'en' ? '繁' : 'EN';
            
            document.querySelectorAll('.i18n').forEach(el => {
                const key = el.getAttribute('data-key');
                if(i18n[currentLang][key]) el.innerText = i18n[currentLang][key];
            });

            // Re-render grid for titles
            const activeFilter = document.querySelector('.filter-btn.bg-gold-400').dataset.filter;
            renderGrid(activeFilter);
        }

    </script>
</body>
</html>